/**
 * @file NewCADSettings.h
 * @author YOUR NAME <YOUR EMAIL ADDRESS>
 *
 * @version 2016-02-23
 * Created on 2016-02-23.
 */

#pragma once

#include "../../datastructures/cad/Settings.h"

namespace smtrat {
namespace cad {
	/// Mixin that provides settings for incrementality and backtracking.
	template<Incrementality I, Backtracking B>
	struct IncrementalityMixin {
		static constexpr Incrementality incrementality = I;
		static constexpr Backtracking backtracking = B;
	};
	using IncrementalityNO = IncrementalityMixin<Incrementality::NONE,Backtracking::ORDERED>;
	using IncrementalityNU = IncrementalityMixin<Incrementality::NONE,Backtracking::UNORDERED>;
	using IncrementalitySO = IncrementalityMixin<Incrementality::SIMPLE,Backtracking::ORDERED>;
	using IncrementalitySU = IncrementalityMixin<Incrementality::SIMPLE,Backtracking::UNORDERED>;
	using IncrementalityF = IncrementalityMixin<Incrementality::FULL,Backtracking::UNORDERED>;
	using IncrementalityFO = IncrementalityMixin<Incrementality::FULL,Backtracking::UNORDERED>;
	using IncrementalityFU = IncrementalityMixin<Incrementality::FULL,Backtracking::UNORDERED>;
	
	/// Mixin that provides settings for the projection operator.
	template<ProjectionType P>
	struct ProjectionMixin {
		static constexpr ProjectionType projectionOperator = P;
	};
	using ProjectionBrown = ProjectionMixin<ProjectionType::Brown>;
	
	/// Mixin that provides settings for the sample comparison.
	template<SampleCompareStrategy SCS, FullSampleCompareStrategy FSCS>
	struct SampleCompareMixin {
		static constexpr cad::SampleCompareStrategy sampleComparator = SCS;
		static constexpr cad::FullSampleCompareStrategy fullSampleComparator = FSCS;
	};
	using SampleCompareValue = SampleCompareMixin<SampleCompareStrategy::Value, FullSampleCompareStrategy::Value>;
	using SampleCompareInteger = SampleCompareMixin<SampleCompareStrategy::Integer, FullSampleCompareStrategy::Integer>;
	
	using SampleCompareI = SampleCompareMixin<SampleCompareStrategy::I, FullSampleCompareStrategy::Integer>;
	using SampleCompareILSA = SampleCompareMixin<SampleCompareStrategy::ILSA, FullSampleCompareStrategy::Integer>;
	using SampleCompareISA = SampleCompareMixin<SampleCompareStrategy::ISA, FullSampleCompareStrategy::Integer>;
	using SampleCompareIS = SampleCompareMixin<SampleCompareStrategy::IS, FullSampleCompareStrategy::Integer>;
	using SampleCompareLI = SampleCompareMixin<SampleCompareStrategy::LI, FullSampleCompareStrategy::Integer>;
	using SampleCompareLIA = SampleCompareMixin<SampleCompareStrategy::LIA, FullSampleCompareStrategy::Integer>;
	using SampleCompareLIS = SampleCompareMixin<SampleCompareStrategy::LIS, FullSampleCompareStrategy::Integer>;
	using SampleCompareLISA = SampleCompareMixin<SampleCompareStrategy::LISA, FullSampleCompareStrategy::Integer>;
	using SampleCompareLS = SampleCompareMixin<SampleCompareStrategy::LS, FullSampleCompareStrategy::Integer>;
	using SampleCompareS = SampleCompareMixin<SampleCompareStrategy::S, FullSampleCompareStrategy::Integer>;	
	
	/// Mixin that provides settings for MIS generation
	template<MISHeuristic MIS>
	struct MISHeuristicMixin {
		static constexpr cad::MISHeuristic misHeuristic = MIS;
	};
	using MISHeuristicTrivial = MISHeuristicMixin<MISHeuristic::TRIVIAL>;
	using MISHeuristicGreedy = MISHeuristicMixin<MISHeuristic::GREEDY>;
}

	struct NewCADBaseSettings: cad::MISHeuristicGreedy {
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::Default;
		static constexpr cad::RootSplittingStrategy rootSplittingStrategy = cad::RootSplittingStrategy::DEFAULT;
		static constexpr cad::CoreHeuristic coreHeuristic = cad::CoreHeuristic::PreferSampling;
		static constexpr std::size_t trivialSampleRadius = 1;
		static constexpr bool simplifyProjectionByBounds = false;
		static constexpr bool debugProjection = false;
		static constexpr bool debugStepsToTikz = false;
		static constexpr bool force_nonincremental = false;
	};
	
	struct NewCADSettingsNaive: NewCADBaseSettings, cad::IncrementalityNO, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<Naive>";
		static constexpr bool force_nonincremental = true;
	};
	
	struct NewCADSettingsNO: NewCADBaseSettings, cad::IncrementalityNO, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADNO>";
	};
	
	struct NewCADSettingsNU: NewCADBaseSettings, cad::IncrementalityNU, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADNU>";
	};
	
	struct NewCADSettingsSO: NewCADBaseSettings, cad::IncrementalitySO, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADSO>";
	};
	struct NewCADSettingsSU: NewCADBaseSettings, cad::IncrementalitySU, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADSU>";
	};
	
	struct NewCADSettingsFU: NewCADBaseSettings, cad::IncrementalityFU, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADFU>";
	};
	
	struct NewCADSettingsFU_SC: NewCADSettingsFU {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SC>";
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::Center;
	};
	struct NewCADSettingsFU_SI: NewCADSettingsFU {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SI>";
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::CenterInt;
	};
	struct NewCADSettingsFU_SL: NewCADSettingsFU {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SL>";
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::LeftInt;
	};
	struct NewCADSettingsFU_SR: NewCADSettingsFU {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SR>";
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::RightInt;
	};
	struct NewCADSettingsFU_SZ: NewCADSettingsFU {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SZ>";
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::ZeroInt;
	};
	struct NewCADSettingsFU_SInf: NewCADSettingsFU {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SInf>";
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::InftyInt;
	};
	
	
	//
	// Settings to test different lifting order heuristics
	//
	struct NewCADBaseSettingsLO: NewCADBaseSettings, cad::IncrementalityFU, cad::ProjectionBrown {};
	
	struct NewCADSettings_LOI: NewCADBaseSettingsLO, cad::SampleCompareI {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCI>";
	};
	struct NewCADSettings_LOILSA: NewCADBaseSettingsLO, cad::SampleCompareILSA {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCILSA>";
	};
	struct NewCADSettings_LOISA: NewCADBaseSettingsLO, cad::SampleCompareISA {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCISA>";
	};
	struct NewCADSettings_LOIS: NewCADBaseSettingsLO, cad::SampleCompareIS {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCIS>";
	};
	struct NewCADSettings_LOLI: NewCADBaseSettingsLO, cad::SampleCompareLI {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCLI>";
	};
	struct NewCADSettings_LOLIA: NewCADBaseSettingsLO, cad::SampleCompareLIA {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCLIA>";
	};
	struct NewCADSettings_LOLIS: NewCADBaseSettingsLO, cad::SampleCompareLIS {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCLIS>";
	};
	struct NewCADSettings_LOLISA: NewCADBaseSettingsLO, cad::SampleCompareLISA {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCLISA>";
	};
	struct NewCADSettings_LOLS: NewCADBaseSettingsLO, cad::SampleCompareLS {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCLS>";
	};
	struct NewCADSettings_LOS: NewCADBaseSettingsLO, cad::SampleCompareS {
		static constexpr auto moduleName = "NewCADModule<NewCADFU_SCS>";
	};
	// end of lifting order heuristics
	
	struct NewCADSettingsF1: NewCADBaseSettings, cad::IncrementalityF, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADF>";
		static constexpr std::size_t trivialSampleRadius = 1;
	};
	struct NewCADSettingsFO1: NewCADBaseSettings, cad::IncrementalityFO, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADFO>";
		static constexpr std::size_t trivialSampleRadius = 1;
	};
	struct NewCADSettingsFOS: NewCADBaseSettings, cad::IncrementalityFO, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADFO>";
		static constexpr std::size_t trivialSampleRadius = 1;
		static constexpr bool simplifyProjectionByBounds = false;
	};
	
	struct NewCADSettingsFV: NewCADBaseSettings, cad::IncrementalityF, cad::ProjectionBrown, cad::SampleCompareValue {
		static constexpr auto moduleName = "NewCADModule<NewCADFV>";
	};
	struct NewCADSettingsFOV: NewCADBaseSettings, cad::IncrementalityFO, cad::ProjectionBrown, cad::SampleCompareValue {
		static constexpr auto moduleName = "NewCADModule<NewCADFOV>";
	};
	
	struct NewCADSettingsEnumerateAll: NewCADBaseSettings, cad::IncrementalityNO, cad::ProjectionBrown, cad::SampleCompareInteger {
		static constexpr auto moduleName = "NewCADModule<NewCADEnumAll>";
		static constexpr cad::CoreHeuristic coreHeuristic = cad::CoreHeuristic::EnumerateAll;
	};
	
	struct NewCADSettingsConfigured {
		static constexpr auto moduleName = "NewCADModule<NewCADConfigured>";
		static constexpr cad::Incrementality incrementality = cad::Incrementality::${NEWCAD_INCREMENTALITY};
		static constexpr cad::Backtracking backtracking = cad::Backtracking::${NEWCAD_BACKTRACKING};
		
		static constexpr cad::ProjectionType projectionOperator = cad::ProjectionType::Brown;
		static constexpr cad::CoreHeuristic coreHeuristic = cad::CoreHeuristic::PreferProjection;
		
		static constexpr cad::MISHeuristic misHeuristic = cad::MISHeuristic::GREEDY;
		static constexpr std::size_t trivialSampleRadius = 1;
		static constexpr bool simplifyProjectionByBounds = false;
		static constexpr bool debugProjection = false;
		static constexpr bool debugStepsToTikz = false;
		static constexpr bool force_nonincremental = false;
		
		static constexpr cad::SampleHeuristic sampleHeuristic = cad::SampleHeuristic::Default;
		static constexpr cad::SampleCompareStrategy sampleComparator = cad::SampleCompareStrategy::Integer;
		static constexpr cad::FullSampleCompareStrategy fullSampleComparator = cad::FullSampleCompareStrategy::Integer;
		static constexpr cad::RootSplittingStrategy rootSplittingStrategy = cad::RootSplittingStrategy::DEFAULT;
	};
}
